{"version":3,"sources":["ImageApp/imageApp.module.css","ImageApp/SearchForm/searchForm.module.css","ImageApp/Gallery/gallery.module.css","ImageApp/Gallery/GalleryItem/galleryItem.module.css","ImageApp/Popup/popup.module.css","ImageApp/SearchForm/SearchForm.js","ImageApp/Gallery/GalleryItem/GalleryItem.js","ImageApp/Gallery/Gallery.js","ImageApp/Popup/Popup.js","ImageApp/ImageApp.js","index.js"],"names":["module","exports","app","searchForm","gallery","photoCard","stats","statsItem","fullscreenButton","backdrop","SearchForm","state","value","onChange","_ref","target","_this","setState","onSubmit","e","preventDefault","props","clearInput","this","react_default","a","createElement","className","style","type","placeholder","autoComplete","Component","GalleryItem","photo","showLargeImage","src","webformatURL","alt","onClick","id","Gallery","images","map","image","key","Gallery_GalleryItem_GalleryItem","Popup","closePop","window","addEventListener","removeEventListener","_this$props","img","styles","role","largeImageURL","ImageApp","API_KEY","API_URL","PAGE_NUMBER","PER_PAGE","imgTags","elemToScroll","React","createRef","possition","bottom","isLargeImage","currentId","fetcher","page","axios","get","concat","then","response","Object","toConsumableArray","mapper","data","hits","counter","fn","nextPage","showMore","scrollTo","top","behavior","_ref2","likes","views","comments","downloads","document","body","tagName","code","scrollHeight","_this$state","Fragment","ImageApp_SearchForm_SearchForm","ImageApp_Gallery_Gallery","length","ImageApp_Popup_Popup","filter","el","closePop2","ReactDOM","render","src_ImageApp_ImageApp","getElementById"],"mappings":"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","file":"static/js/main.11161070.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"imageApp_app__2cShS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"searchForm_searchForm__2Ib0H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"gallery_gallery__2V1Iv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photoCard\":\"galleryItem_photoCard__2aSqr\",\"stats\":\"galleryItem_stats__3WR9e\",\"statsItem\":\"galleryItem_statsItem__2oNOb\",\"fullscreenButton\":\"galleryItem_fullscreenButton__2zwlg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"popup_backdrop__1mibS\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport style from './searchForm.module.css';\n\nclass SearchForm extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    value: '',\n  };\n\n  onChange = ({ target }) => {\n    this.setState({\n      value: target.value,\n    });\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value);\n    this.clearInput();\n  };\n\n  clearInput = () => {\n    this.setState({\n      value: '',\n    });\n  };\n\n  render() {\n    const { value } = this.state;\n    return (\n      <form className={[style.searchForm]} onSubmit={this.onSubmit}>\n        <input\n          type=\"text\"\n          value={value}\n          onChange={this.onChange}\n          placeholder=\"search image...\"\n          autoComplete=\"off\"\n        />\n      </form>\n    );\n  }\n}\n\nexport default SearchForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './galleryItem.module.css';\n\nconst { photoCard, stats, statsItem, fullscreenButton } = { ...style };\n\nconst GalleryItem = ({ photo, showLargeImage }) => {\n  return (\n    <div className={photoCard}>\n      <img src={photo.webformatURL} alt=\"\" />\n\n      <div className={stats}>\n        <p className={statsItem}>\n          <i className=\"material-icons\">thumb_up</i>\n          1108\n        </p>\n        <p className={statsItem}>\n          <i className=\"material-icons\">visibility</i>\n          320321\n        </p>\n        <p className={statsItem}>\n          <i className=\"material-icons\">comment</i>\n          129\n        </p>\n        <p className={statsItem}>\n          <i className=\"material-icons\">cloud_download</i>\n          176019\n        </p>\n      </div>\n\n      <button\n        type=\"button\"\n        className={fullscreenButton}\n        onClick={showLargeImage(photo.id)}\n      >\n        <i className=\"material-icons\">zoom_out_map</i>\n      </button>\n    </div>\n  );\n};\n\nGalleryItem.propTypes = {\n  photo: PropTypes.shape({}).isRequired,\n  showLargeImage: PropTypes.func.isRequired,\n};\n\nexport default GalleryItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './gallery.module.css';\nimport GalleryItem from './GalleryItem/GalleryItem';\n\nconst Gallery = ({ images, showLargeImage }) => (\n  <ul className={[style.gallery]}>\n    {images.map(image => (\n      <li key={image.id}>\n        <GalleryItem photo={image} showLargeImage={showLargeImage} />\n      </li>\n    ))}\n  </ul>\n);\n\nGallery.propTypes = {\n  images: PropTypes.shape([]).isRequired,\n  showLargeImage: PropTypes.func.isRequired,\n};\n\nexport default Gallery;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './popup.module.css';\n\nclass Popup extends Component {\n  static propTypes = {\n    closePop: PropTypes.func.isRequired,\n    img: PropTypes.shape([]).isRequired,\n  };\n\n  closePop = this.props.closePop;\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.closePop);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.closePop);\n  }\n\n  render() {\n    const { closePop, img } = this.props;\n\n    return (\n      <div className={[styles.backdrop]} onClick={closePop} role=\"banner\">\n        <div>\n          <img src={img[0].largeImageURL} alt=\"img\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Popup;\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport styles from './imageApp.module.css';\nimport SearchForm from './SearchForm/SearchForm';\nimport Gallery from './Gallery/Gallery';\nimport Popup from './Popup/Popup';\n\nclass ImageApp extends Component {\n  API_KEY = '12913894-cfe9c627517d4fd58155261a8';\n\n  API_URL =\n    'https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=';\n\n  PAGE_NUMBER = 1;\n\n  PER_PAGE = 12;\n\n  imgTags = [];\n\n  elemToScroll = React.createRef();\n\n  style = { possition: 'fixed', bottom: 0 };\n\n  state = {\n    value: '',\n    images: [],\n    isLargeImage: false,\n    currentId: '',\n  };\n\n  // почему не получается повесить скрол на клик кнопки??\n  componentDidUpdate() {\n    const { isLargeImage } = this.state;\n    if (!isLargeImage) {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  fetcher = page => {\n    axios\n      .get(\n        `${this.API_URL}${this.state.value}&page=${page}&per_page=${\n          this.PER_PAGE\n        }&key=${this.API_KEY}`,\n      )\n      .then(response =>\n        this.setState(({ images }) => ({\n          images: [...images, ...this.mapper(response.data.hits)],\n        })),\n      );\n  };\n\n  counter = fn => {\n    let nextPage = this.PAGE_NUMBER;\n    return () => {\n      nextPage += 1;\n      fn(nextPage);\n    };\n  };\n\n  showMore = this.counter(this.fetcher);\n\n  onSubmit = value => {\n    window.scrollTo({\n      top: 1000,\n      behavior: 'smooth',\n    });\n\n    this.setState({ value, images: [] }, function() {\n      this.fetcher(this.PAGE_NUMBER);\n    });\n  };\n\n  mapper = images => {\n    return images.map(\n      ({\n        id,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => ({\n        id,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }),\n    );\n  };\n\n  showLargeImage = id => () => {\n    this.setState({ isLargeImage: true, currentId: id });\n    document.body.style = 'overflow: hidden';\n  };\n\n  closePop = e => {\n    if (e.target.tagName === 'DIV' || e.code === 'Escape') {\n      this.setState({\n        isLargeImage: false,\n      });\n      document.body.style = 'overflow: vissible';\n    }\n  };\n\n  render() {\n    const { images, currentId, isLargeImage } = this.state;\n    return (\n      <>\n        {!isLargeImage && (\n          <div className={[styles.app]}>\n            <SearchForm onSubmit={this.onSubmit} />\n            <Gallery\n              images={images}\n              showLargeImage={this.showLargeImage}\n              isLargeImage={isLargeImage}\n            />\n            {images.length > 0 && (\n              <button type=\"button\" onClick={this.showMore}>\n                show more\n              </button>\n            )}\n          </div>\n        )}\n        {isLargeImage && (\n          <Popup\n            img={images.filter(el => el.id === currentId)}\n            closePop={this.closePop}\n            closePop2={this.closePop2}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default ImageApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ImageApp from './ImageApp/ImageApp';\n\nReactDOM.render(<ImageApp />, document.getElementById('root'));\n"],"sourceRoot":""}